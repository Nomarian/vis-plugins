<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>vis-plugins</title>
	<link rel="stylesheet" href="style.css">
</head>

<body>
	<h1>vis-plugins</h1>

	<p>vis-plugins is collection of plugins for the <a href="https://github.com/martanne/vis">vis</a>
		text editor.</p>
	<p>The original list was taken from the vis wiki <a href="https://github.com/martanne/vis/wiki/Plugins">Plugins</a>
		and <a href="https://github.com/martanne/vis/wiki/Themes">Themes</a>.</p>
	<p>Make PR's to <a href="https://github.com/erf/vis-plugins">vis-plugins</a> to update <a
			href="./plugins.js">plugins</a>, <a href="./themes.js">themes</a> or to improve this page.</p>

	<p>Plugins can be installed <a href="https://github.com/martanne/vis/wiki/Plugins">manually</a> or using <a
			href="https://github.com/erf/vis-plug">vis-plug</a></p>

	<br>


	<label for="show-plugins">plugins</label>
	<input checked="true" type="checkbox" id="show-plugins" onclick="toggle_plugins()">

	<label for="show-themes">themes</label>
	<input checked="true" type="checkbox" id="show-themes" onclick="toggle_themes()">

	<input type="text" id="search" placeholder="Search">

	<div class="row">

		<div id="plugins-container" class="column">
			<h2>Plugins</h2>
			<ul id="plugins" class="container"></ul>
		</div>

		<div id="themes-container" class="column">
			<h2>Themes</h2>
			<ul id="themes" class="container"></ul>
		</div>

	</div>

	<script type="text/javascript" src="plugins.js"></script>
	<script type="text/javascript" src="themes.js"></script>
	<script type="text/javascript" src="elite.min.js"></script>
	<script>

		// list plugins.json
		plugins.sort((a, b) => a.name.localeCompare(b.name));
		let plugins_el = plugins.map((plugin) => {
			return el('li', '', { class: 'item' }, [
				el('p', plugin.name, { 'class': 'name' }),
				el('p', plugin.description, { class: 'description' }),
				el('a', { href: plugin.repo }, plugin.repo),
				el('p', plugin.path || 'init.lua'),
			]);
		})
		set('plugins', plugins_el)

		// list themes.json
		themes.sort((a, b) => a.name.localeCompare(b.name));
		let themes_el = themes.map((theme) => {
			return el('li', '', { class: 'item' }, [
				el('p', theme.name, { 'class': 'name' }),
				el('img', { src: theme.image, class: 'image' }),
				el('a', { href: theme.repo }, theme.repo),
				el('p', theme.path || 'init.lua'),
			]);
		})
		set('themes', themes_el)

		function search() {
			let query = get('search').value
			let pluginList = get('plugins').getElementsByTagName('li')
			let themeList = get('themes').getElementsByTagName('li')
			for (let plugin of pluginList) {
				plugin.style.display = plugin.innerText.toLowerCase().indexOf(query.toLowerCase()) > -1 ?
					'block' : 'none'
			}
			for (let theme of themeList) {
				theme.style.display = theme.innerText.toLowerCase().indexOf(query.toLowerCase()) > -1
					? 'block' : 'none';
			}
		}

		get('search').addEventListener('input', search);

		function toggle_plugins() {
			let pluginsDiv = get('plugins-container')
			pluginsDiv.style.display = get('show-plugins').checked ? 'block' : 'none'
		}

		function toggle_themes() {
			let themesDiv = get('themes-container')
			themesDiv.style.display = get('show-themes').checked ? 'block' : 'none'
		}

	</script>
</body>

</html>